<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse p-0" style="z-index: 1050;">
    <div class="position-sticky pt-3">
        <div class="text-center text-white mb-4">
            <img src="/public/images/RehabPlus.png" alt="App Logo" style="width: 120px; height: auto;">
            <h5 class="mt-2 text-white">RehabPlus System</h5>
        </div>

        <ul class="nav flex-column">
            <!-- Dashboard -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'dashboard' ? 'active' : '' %>" href="/dashboard">
                    <i class="bi bi-speedometer2 me-2"></i>Dashboard
                </a>
            </li>

            <!-- Patients -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'patients' ? 'active' : '' %>" href="/patients">
                    <i class="bi bi-people me-2"></i>Patients
                </a>
            </li>

            <!-- Register Patient -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'register' ? 'active' : '' %>" href="/patient/register">
                    <i class="bi bi-person-plus me-2"></i>Register Patient
                </a>
            </li>

            <!-- Appointments (ADMIN, PT) -->
            <% if (user.role === 'ADMIN' || user.role === 'PT') { %>
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'appointments' ? 'active' : '' %>" href="/appointments">
                    <i class="bi bi-calendar-check me-2"></i>Appointments
                </a>
            </li>
            <% } %>

            <!-- Courses -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'courses' ? 'active' : '' %>" href="/courses">
                    <i class="bi bi-book me-2"></i>Courses
                </a>
            </li>

            <!-- Bills -->
            <% if (user.role === 'ADMIN') { %>
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'bills' ? 'active' : '' %>" href="/bills">
                    <i class="bi bi-receipt me-2"></i>Bills
                </a>
            </li>
            <% } %>

            <!-- Statistics (ADMIN, PT) -->
            <% if (user.role === 'ADMIN' || user.role === 'PT') { %>
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'statistics' ? 'active' : '' %>" href="/statistics">
                    <i class="bi bi-graph-up me-2"></i>Statistics
                </a>
            </li>
            <% } %>

            <!-- Diagnostic -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'diagnostic' ? 'active' : '' %>" href="/diagnostic">
                    <i class="bi bi-clipboard-pulse me-2"></i>Diagnostic
                </a>
            </li>

            <!-- Profile -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'profile' ? 'active' : '' %>" href="/profile">
                    <i class="bi bi-person-circle me-2"></i>Profile
                </a>
            </li>

            <!-- Admin Section -->
            <% if (user.role === 'ADMIN') { %>
            <li class="nav-item mt-3">
                <hr class="text-white-50 mx-3">
                <small class="text-white-50 ms-3 text-uppercase fw-bold">Admin Panel</small>
            </li>

            <!-- Services -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'services' ? 'active' : '' %>" href="/admin/services">
                    <i class="bi bi-list-check me-2"></i>Services
                </a>
            </li>

            <!-- Clinics -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'clinics' ? 'active' : '' %>" href="/admin/clinics">
                    <i class="bi bi-building me-2"></i>Clinics
                </a>
            </li>

            <!-- Users -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'users' ? 'active' : '' %>" href="/admin/users">
                    <i class="bi bi-person-gear me-2"></i>Users
                </a>
            </li>

            <!-- Public Booking Settings -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'booking-settings' ? 'active' : '' %>" href="/admin/booking-settings">
                    <i class="bi bi-gear-fill me-2"></i>Booking Settings
                </a>
            </li>

            <!-- Notification Settings -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'notification-settings' ? 'active' : '' %>" href="/admin/notification-settings">
                    <i class="bi bi-bell-fill me-2"></i>Notification Settings
                </a>
            </li>

            <!-- Document Settings -->
            <li class="nav-item">
                <a class="nav-link <%= activePage === 'document-settings' ? 'active' : '' %>" href="/admin/document-settings">
                    <i class="bi bi-file-earmark-text me-2"></i>Document Settings
                </a>
            </li>

            <!-- View Public Booking Page -->
            <li class="nav-item">
                <a class="nav-link" href="/book" target="_blank">
                    <i class="bi bi-box-arrow-up-right me-2"></i>Public Booking
                </a>
            </li>
            <% } %>

            <!-- Logout -->
            <li class="nav-item mt-3">
                <a class="nav-link" href="#" onclick="logout()">
                    <i class="bi bi-box-arrow-left me-2"></i>Logout
                </a>
            </li>
        </ul>

        <div class="text-white text-center mt-4 px-3">
            <small>Logged in as:</small><br>
            <strong><%= user.name || user.email %></strong><br>
            <span class="badge bg-light text-dark mt-1"><%= user.role %></span>
        </div>
    </div>
</nav>